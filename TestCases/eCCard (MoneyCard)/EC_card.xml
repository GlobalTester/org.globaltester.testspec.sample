<?xml version="1.0" encoding="UTF-8"?>
<TestCase id="eC_MoneyCard_SelectApplication" xmlns="http://bsi.bund.de/TR03105" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://bsi.bund.de/TR03105 ../../../schema/TR03105_Part_3_3.xsd">
	<Title></Title>
	<Version>1.00</Version>
	<Purpose></Purpose>
	<Profile></Profile>
	<Reference></Reference>
	<Precondition>None</Precondition>
	<TestStep>
		<Command>
			<Text>Reset card</Text>
		</Command>
		<Description> Perform a cold reset of the card in order to ensure all temporary data is removed. </Description>
		<TechnicalCommand>
			card = new Card(_reader);
			
			print("Reseting chip");
			atr = card.reset(Card.RESET_COLD);
			print (atr);
			
		</TechnicalCommand>
		<ExpectedResult>
			<Text>ATR</Text>
		</ExpectedResult>
	</TestStep>
	<TestStep>
		<Command>
			<Text>Select MF</Text>
		</Command>
		<Description>Select the Master File and get the FCP</Description>
		<TechnicalCommand>
			command = new ByteString("00 A4 00 04 02 3F 00 00", HEX);
			fcp = card.gt_sendCommand(command);
		</TechnicalCommand>
		<ExpectedResult>
			<Text>SW 9000</Text>
			<TechnicalResult>
				assertStatusWord(new Array("9000"), card.SW.toString(HEX), FAILURE); 
				assertMatchValue("62", fcp.bytes(1), FAILURE);
			</TechnicalResult>
		</ExpectedResult>
	</TestStep>
		<TestStep>
		<Command>
			<Text>Select eC card application</Text>
		</Command>
		<Description>Select the eC card application with a plain SelectApplication APDU</Description>
		<TechnicalCommand>
			command = new ByteString("00 A4 04 04 09 D2 76 00 00 25 45 50 02 00 00", HEX);
			responce = card.gt_sendCommand(command);
		</TechnicalCommand>
		<ExpectedResult>
			<Text>SW 9000</Text>
			<TechnicalResult>
				assertStatusWord(new Array("9000"), card.SW.toString(HEX), FAILURE); 
				assertMatchValue("", responce, FAILURE);
			</TechnicalResult>
		</ExpectedResult>
	</TestStep>
		</TestStep>
		<TestStep>
		<Command>
			<Text>Select </Text>
		</Command>
		<Description></Description>
		<TechnicalCommand>
			command = new ByteString("00 A4 02 04 02 01 04 00", HEX);
			fcp = card.gt_sendCommand(command);
		</TechnicalCommand>
		<ExpectedResult>
			<Text>SW 9000</Text>
			<TechnicalResult>
				assertStatusWord(new Array("9000"), card.SW.toString(HEX), FAILURE); 
				assertMatchValue("62", fcp.bytes(1), FAILURE);
			</TechnicalResult>
		</ExpectedResult>
	</TestStep>
		</TestStep>
		<TestStep>
		<Command>
			<Text></Text>
		</Command>
		<Description></Description>
		<TechnicalCommand>
			command = new ByteString("00 B2 01 04 00", HEX);
			responce = card.gt_sendCommand(command);
		</TechnicalCommand>
		<ExpectedResult>
			<Text>SW 9000</Text>
			<TechnicalResult>
				assertStatusWord(new Array("9000"), card.SW.toString(HEX), FAILURE); 
				assertNotMatchValue("", responce, FAILURE);
			</TechnicalResult>
		</ExpectedResult>
	</TestStep>
</TestCase>